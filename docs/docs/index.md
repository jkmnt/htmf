![](logo_small.png)

# HTML in Python f-strings

htmf is a collection of utilities for writing HTML in Python f-strings. It works great for typed UI components.

Also it is the suite of tools to boost the developer experience:

- Pylint [plugin](lint.md) checking if expressions are HTML-safe and markup is not soup
- VS Code [syntax highlighting](highlight.md)
- HTML [formatter](format.md)

## Installation

``` { .text, .copy }
pip install htmf
```

## Working example

<!--
from dataclasses import dataclass
from flask import Flask, url_for, request

import htmf as ht
from htmf import Safe


@dataclass
class Soup:
    name: str
    countries: list[str]
    is_chunky: bool


def SoupCard(id: int, soup: Soup) -> Safe:
    return ht.m(
        f"""
        <div class="card mb-2">
            <div class="card-body">
                <h5 class="{ ht.c("card-title", soup.is_chunky and 'text-danger') }" >
                    { ht.t(soup.name) }
                </h5>
                <p class="card-text">
                    Countries:
                    { ht.t(', '.join(soup.countries) if soup.countries else '?') }
                </p>
                <a href="{ ht.t(url_for('soup', id=id)) }" class="card-link">Go</a>
            </div>
        </div>
        """
    )


def SoupsCollection(soups: dict[int, Soup], limit: int) -> Safe:
    selected = list(soups.items())[:limit]

    return ht.m(
        f"""
        <div class="container">
            <h4>Showing first { ht.t(limit) } soups:</h4>
            { ht.t(SoupCard(*soup) for soup in selected) }
        </div>
        """
    )


def Layout(body: Safe, title: str):
    bootstrap = "https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    return ht.document(
        f"""
        <!doctype html>
        <html>
            <head>
                <title>{ ht.t(title) }</title>
                <link href="{ bootstrap }" rel="stylesheet">
            </head>
            <body>
                { body }
            </body>
        </html>
        """
    )


app = Flask(__name__)

# https://en.wikipedia.org/wiki/List_of_soups
SOUPS = {
    1: Soup("Aguadito", ["Peru"], True),
    2: Soup("Ant egg soup", ["Laos", "Northeastern Thailand"], True),
    3: Soup("Beef noodle soup", ["East Asia"], False),
    4: Soup("Chicken soup", [], False),
    5: Soup("Tom Yum", ["Thailand"], True),
}


@app.route("/")
def index():
    limit = request.args.get("limit", type=int, default=len(SOUPS))
    return Layout(SoupsCollection(SOUPS, limit=limit), title="Soups list")


@app.route("/<int:id>")
def soup(id: int):
    found = SOUPS.get(id)
    if not found:
        return Layout(ht.t("Unknown soup id"), title="Soup 404")
    return Layout(SoupCard(id, found), title=found.name)
     -->
<div class="htmf-code"><div><span style="color: #af00db;">from</span><span style="color: #000000;"> </span><span style="color: #267f99;">dataclasses</span><span style="color: #000000;"> </span><span style="color: #af00db;">import</span><span style="color: #000000;"> </span><span style="color: #795e26;">dataclass</span></div><div><span style="color: #af00db;">from</span><span style="color: #000000;"> </span><span style="color: #267f99;">flask</span><span style="color: #000000;"> </span><span style="color: #af00db;">import</span><span style="color: #000000;"> </span><span style="color: #267f99;">Flask</span><span style="color: #000000;">, </span><span style="color: #795e26;">url_for</span><span style="color: #000000;">, </span><span style="color: #001080;">request</span></div><br><div><span style="color: #af00db;">import</span><span style="color: #000000;"> </span><span style="color: #267f99;">htmf</span><span style="color: #000000;"> </span><span style="color: #af00db;">as</span><span style="color: #000000;"> </span><span style="color: #267f99;">ht</span></div><div><span style="color: #af00db;">from</span><span style="color: #000000;"> </span><span style="color: #267f99;">htmf</span><span style="color: #000000;"> </span><span style="color: #af00db;">import</span><span style="color: #000000;"> </span><span style="color: #267f99;">Safe</span></div><br><br><div><span style="color: #795e26;">@</span><span style="color: #795e26;">dataclass</span></div><div><span style="color: #0000ff;">class</span><span style="color: #000000;"> </span><span style="color: #267f99;">Soup</span><span style="color: #000000;">:</span></div><div><span style="color: #000000;">&nbsp; &nbsp; </span><span style="color: #001080;">name</span><span style="color: #000000;">: </span><span style="color: #267f99;">str</span></div><div><span style="color: #000000;">&nbsp; &nbsp; </span><span style="color: #001080;">countries</span><span style="color: #000000;">: </span><span style="color: #267f99;">list</span><span style="color: #000000;">[</span><span style="color: #267f99;">str</span><span style="color: #000000;">]</span></div><div><span style="color: #000000;">&nbsp; &nbsp; </span><span style="color: #001080;">is_chunky</span><span style="color: #000000;">: </span><span style="color: #267f99;">bool</span></div><br><br><div><span style="color: #0000ff;">def</span><span style="color: #000000;"> </span><span style="color: #795e26;">SoupCard</span><span style="color: #000000;">(</span><span style="color: #001080;">id</span><span style="color: #000000;">: </span><span style="color: #267f99;">int</span><span style="color: #000000;">, </span><span style="color: #001080;">soup</span><span style="color: #000000;">: </span><span style="color: #267f99;">Soup</span><span style="color: #000000;">) -&gt; </span><span style="color: #267f99;">Safe</span><span style="color: #000000;">:</span></div><div><span style="color: #000000;">&nbsp; &nbsp; </span><span style="color: #af00db;">return</span><span style="color: #000000;"> </span><span style="color: #267f99;">ht</span><span style="color: #000000;">.</span><span style="color: #001080;">m</span><span style="color: #000000;">(</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #0000ff;">f</span><span style="color: #a31515;">"""</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #800000;">&lt;div</span><span style="color: #000000;"> </span><span style="color: #ff0000;">class</span><span style="color: #000000;">=</span><span style="color: #0000ff;">"card mb-2"</span><span style="color: #800000;">&gt;</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #800000;">&lt;div</span><span style="color: #000000;"> </span><span style="color: #ff0000;">class</span><span style="color: #000000;">=</span><span style="color: #0000ff;">"card-body"</span><span style="color: #800000;">&gt;</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #800000;">&lt;h5</span><span style="color: #000000;"> </span><span style="color: #ff0000;">class</span><span style="color: #000000;">=</span><span style="color: #0000ff;">"</span><span style="color: #0000ff;font-style: italic;font-weight: bold;">{</span><span style="color: #000000;"> </span><span style="color: #267f99;">ht</span><span style="color: #000000;">.</span><span style="color: #001080;">c</span><span style="color: #000000;">(</span><span style="color: #a31515;">"card-title"</span><span style="color: #000000;">, </span><span style="color: #001080;">soup</span><span style="color: #000000;">.</span><span style="color: #001080;">is_chunky</span><span style="color: #000000;"> </span><span style="color: #af00db;">and</span><span style="color: #000000;"> </span><span style="color: #a31515;">'text-danger'</span><span style="color: #000000;">) </span><span style="color: #0000ff;font-style: italic;font-weight: bold;">}</span><span style="color: #0000ff;">"</span><span style="color: #000000;"> </span><span style="color: #800000;">&gt;</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #0000ff;font-style: italic;font-weight: bold;">{</span><span style="color: #000000;"> </span><span style="color: #267f99;">ht</span><span style="color: #000000;">.</span><span style="color: #001080;">t</span><span style="color: #000000;">(</span><span style="color: #001080;">soup</span><span style="color: #000000;">.</span><span style="color: #001080;">name</span><span style="color: #000000;">) </span><span style="color: #0000ff;font-style: italic;font-weight: bold;">}</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #800000;">&lt;/h5&gt;</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #800000;">&lt;p</span><span style="color: #000000;"> </span><span style="color: #ff0000;">class</span><span style="color: #000000;">=</span><span style="color: #0000ff;">"card-text"</span><span style="color: #800000;">&gt;</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Countries:</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #0000ff;font-style: italic;font-weight: bold;">{</span><span style="color: #000000;"> </span><span style="color: #267f99;">ht</span><span style="color: #000000;">.</span><span style="color: #001080;">t</span><span style="color: #000000;">(</span><span style="color: #a31515;">', '</span><span style="color: #000000;">.</span><span style="color: #795e26;">join</span><span style="color: #000000;">(</span><span style="color: #001080;">soup</span><span style="color: #000000;">.</span><span style="color: #001080;">countries</span><span style="color: #000000;">) </span><span style="color: #af00db;">if</span><span style="color: #000000;"> </span><span style="color: #001080;">soup</span><span style="color: #000000;">.</span><span style="color: #001080;">countries</span><span style="color: #000000;"> </span><span style="color: #af00db;">else</span><span style="color: #000000;"> </span><span style="color: #a31515;">'?'</span><span style="color: #000000;">) </span><span style="color: #0000ff;font-style: italic;font-weight: bold;">}</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #800000;">&lt;/p&gt;</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #800000;">&lt;a</span><span style="color: #000000;"> </span><span style="color: #ff0000;">href</span><span style="color: #000000;">=</span><span style="color: #0000ff;">"</span><span style="color: #0000ff;font-style: italic;font-weight: bold;">{</span><span style="color: #000000;"> </span><span style="color: #267f99;">ht</span><span style="color: #000000;">.</span><span style="color: #001080;">t</span><span style="color: #000000;">(</span><span style="color: #795e26;">url_for</span><span style="color: #000000;">(</span><span style="color: #a31515;">'soup'</span><span style="color: #000000;">, </span><span style="color: #001080;">id</span><span style="color: #000000;">=</span><span style="color: #001080;">id</span><span style="color: #000000;">)) </span><span style="color: #0000ff;font-style: italic;font-weight: bold;">}</span><span style="color: #0000ff;">"</span><span style="color: #000000;"> </span><span style="color: #ff0000;">class</span><span style="color: #000000;">=</span><span style="color: #0000ff;">"card-link"</span><span style="color: #800000;">&gt;</span><span style="color: #000000;">Go</span><span style="color: #800000;">&lt;/a&gt;</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #800000;">&lt;/div&gt;</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #800000;">&lt;/div&gt;</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #a31515;">"""</span></div><div><span style="color: #000000;">&nbsp; &nbsp; )</span></div><br><br><div><span style="color: #0000ff;">def</span><span style="color: #000000;"> </span><span style="color: #795e26;">SoupsCollection</span><span style="color: #000000;">(</span><span style="color: #001080;">soups</span><span style="color: #000000;">: </span><span style="color: #267f99;">dict</span><span style="color: #000000;">[</span><span style="color: #267f99;">int</span><span style="color: #000000;">, </span><span style="color: #267f99;">Soup</span><span style="color: #000000;">], </span><span style="color: #001080;">limit</span><span style="color: #000000;">: </span><span style="color: #267f99;">int</span><span style="color: #000000;">) -&gt; </span><span style="color: #267f99;">Safe</span><span style="color: #000000;">:</span></div><div><span style="color: #000000;">&nbsp; &nbsp; </span><span style="color: #001080;">selected</span><span style="color: #000000;"> = </span><span style="color: #267f99;">list</span><span style="color: #000000;">(</span><span style="color: #001080;">soups</span><span style="color: #000000;">.</span><span style="color: #795e26;">items</span><span style="color: #000000;">())[:</span><span style="color: #001080;">limit</span><span style="color: #000000;">]</span></div><br><div><span style="color: #000000;">&nbsp; &nbsp; </span><span style="color: #af00db;">return</span><span style="color: #000000;"> </span><span style="color: #267f99;">ht</span><span style="color: #000000;">.</span><span style="color: #001080;">m</span><span style="color: #000000;">(</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #0000ff;">f</span><span style="color: #a31515;">"""</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #800000;">&lt;div</span><span style="color: #000000;"> </span><span style="color: #ff0000;">class</span><span style="color: #000000;">=</span><span style="color: #0000ff;">"container"</span><span style="color: #800000;">&gt;</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #800000;">&lt;h4&gt;</span><span style="color: #000000;">Showing first </span><span style="color: #0000ff;font-style: italic;font-weight: bold;">{</span><span style="color: #000000;"> </span><span style="color: #267f99;">ht</span><span style="color: #000000;">.</span><span style="color: #001080;">t</span><span style="color: #000000;">(</span><span style="color: #001080;">limit</span><span style="color: #000000;">) </span><span style="color: #0000ff;font-style: italic;font-weight: bold;">}</span><span style="color: #000000;"> soups:</span><span style="color: #800000;">&lt;/h4&gt;</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #0000ff;font-style: italic;font-weight: bold;">{</span><span style="color: #000000;"> </span><span style="color: #267f99;">ht</span><span style="color: #000000;">.</span><span style="color: #001080;">t</span><span style="color: #000000;">(</span><span style="color: #795e26;">SoupCard</span><span style="color: #000000;">(*</span><span style="color: #001080;">soup</span><span style="color: #000000;">) </span><span style="color: #af00db;">for</span><span style="color: #000000;"> </span><span style="color: #001080;">soup</span><span style="color: #000000;"> </span><span style="color: #af00db;">in</span><span style="color: #000000;"> </span><span style="color: #001080;">selected</span><span style="color: #000000;">) </span><span style="color: #0000ff;font-style: italic;font-weight: bold;">}</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #800000;">&lt;/div&gt;</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #a31515;">"""</span></div><div><span style="color: #000000;">&nbsp; &nbsp; )</span></div><br><br><div><span style="color: #0000ff;">def</span><span style="color: #000000;"> </span><span style="color: #795e26;">Layout</span><span style="color: #000000;">(</span><span style="color: #001080;">body</span><span style="color: #000000;">: </span><span style="color: #267f99;">Safe</span><span style="color: #000000;">, </span><span style="color: #001080;">title</span><span style="color: #000000;">: </span><span style="color: #267f99;">str</span><span style="color: #000000;">):</span></div><div><span style="color: #000000;">&nbsp; &nbsp; </span><span style="color: #001080;">bootstrap</span><span style="color: #000000;"> = </span><span style="color: #a31515;">"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"</span></div><div><span style="color: #000000;">&nbsp; &nbsp; </span><span style="color: #af00db;">return</span><span style="color: #000000;"> </span><span style="color: #267f99;">ht</span><span style="color: #000000;">.</span><span style="color: #001080;">document</span><span style="color: #000000;">(</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #0000ff;">f</span><span style="color: #a31515;">"""</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #800000;">&lt;!doctype</span><span style="color: #000000;"> </span><span style="color: #ff0000;">html</span><span style="color: #800000;">&gt;</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #800000;">&lt;html&gt;</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #800000;">&lt;head&gt;</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #800000;">&lt;title&gt;</span><span style="color: #0000ff;font-style: italic;font-weight: bold;">{</span><span style="color: #000000;"> </span><span style="color: #267f99;">ht</span><span style="color: #000000;">.</span><span style="color: #001080;">t</span><span style="color: #000000;">(</span><span style="color: #001080;">title</span><span style="color: #000000;">) </span><span style="color: #0000ff;font-style: italic;font-weight: bold;">}</span><span style="color: #800000;">&lt;/title&gt;</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #800000;">&lt;link</span><span style="color: #000000;"> </span><span style="color: #ff0000;">href</span><span style="color: #000000;">=</span><span style="color: #0000ff;">"</span><span style="color: #0000ff;font-style: italic;font-weight: bold;">{</span><span style="color: #000000;"> </span><span style="color: #001080;">bootstrap</span><span style="color: #000000;"> </span><span style="color: #0000ff;font-style: italic;font-weight: bold;">}</span><span style="color: #0000ff;">"</span><span style="color: #000000;"> </span><span style="color: #ff0000;">rel</span><span style="color: #000000;">=</span><span style="color: #0000ff;">"stylesheet"</span><span style="color: #800000;">&gt;</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #800000;">&lt;/head&gt;</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #800000;">&lt;body&gt;</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #0000ff;font-style: italic;font-weight: bold;">{</span><span style="color: #000000;"> </span><span style="color: #001080;">body</span><span style="color: #000000;"> </span><span style="color: #0000ff;font-style: italic;font-weight: bold;">}</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #800000;">&lt;/body&gt;</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #800000;">&lt;/html&gt;</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #a31515;">"""</span></div><div><span style="color: #000000;">&nbsp; &nbsp; )</span></div><br><br><div><span style="color: #001080;">app</span><span style="color: #000000;"> = </span><span style="color: #267f99;">Flask</span><span style="color: #000000;">(</span><span style="color: #001080;">__name__</span><span style="color: #000000;">)</span></div><br><div><span style="color: #008000;"># https://en.wikipedia.org/wiki/List_of_soups</span></div><div><span style="color: #0070c1;">SOUPS</span><span style="color: #000000;"> = {</span></div><div><span style="color: #000000;">&nbsp; &nbsp; </span><span style="color: #098658;">1</span><span style="color: #000000;">: </span><span style="color: #267f99;">Soup</span><span style="color: #000000;">(</span><span style="color: #a31515;">"Aguadito"</span><span style="color: #000000;">, [</span><span style="color: #a31515;">"Peru"</span><span style="color: #000000;">], </span><span style="color: #0000ff;">True</span><span style="color: #000000;">),</span></div><div><span style="color: #000000;">&nbsp; &nbsp; </span><span style="color: #098658;">2</span><span style="color: #000000;">: </span><span style="color: #267f99;">Soup</span><span style="color: #000000;">(</span><span style="color: #a31515;">"Ant egg soup"</span><span style="color: #000000;">, [</span><span style="color: #a31515;">"Laos"</span><span style="color: #000000;">, </span><span style="color: #a31515;">"Northeastern Thailand"</span><span style="color: #000000;">], </span><span style="color: #0000ff;">True</span><span style="color: #000000;">),</span></div><div><span style="color: #000000;">&nbsp; &nbsp; </span><span style="color: #098658;">3</span><span style="color: #000000;">: </span><span style="color: #267f99;">Soup</span><span style="color: #000000;">(</span><span style="color: #a31515;">"Beef noodle soup"</span><span style="color: #000000;">, [</span><span style="color: #a31515;">"East Asia"</span><span style="color: #000000;">], </span><span style="color: #0000ff;">False</span><span style="color: #000000;">),</span></div><div><span style="color: #000000;">&nbsp; &nbsp; </span><span style="color: #098658;">4</span><span style="color: #000000;">: </span><span style="color: #267f99;">Soup</span><span style="color: #000000;">(</span><span style="color: #a31515;">"Chicken soup"</span><span style="color: #000000;">, [], </span><span style="color: #0000ff;">False</span><span style="color: #000000;">),</span></div><div><span style="color: #000000;">&nbsp; &nbsp; </span><span style="color: #098658;">5</span><span style="color: #000000;">: </span><span style="color: #267f99;">Soup</span><span style="color: #000000;">(</span><span style="color: #a31515;">"Tom Yum"</span><span style="color: #000000;">, [</span><span style="color: #a31515;">"Thailand"</span><span style="color: #000000;">], </span><span style="color: #0000ff;">True</span><span style="color: #000000;">),</span></div><div><span style="color: #000000;">}</span></div><br><br><div><span style="color: #795e26;">@</span><span style="color: #001080;">app</span><span style="color: #795e26;">.</span><span style="color: #795e26;">route</span><span style="color: #000000;">(</span><span style="color: #a31515;">"/"</span><span style="color: #000000;">)</span></div><div><span style="color: #0000ff;">def</span><span style="color: #000000;"> </span><span style="color: #795e26;">index</span><span style="color: #000000;">():</span></div><div><span style="color: #000000;">&nbsp; &nbsp; </span><span style="color: #001080;">limit</span><span style="color: #000000;"> = </span><span style="color: #001080;">request</span><span style="color: #000000;">.</span><span style="color: #001080;">args</span><span style="color: #000000;">.</span><span style="color: #795e26;">get</span><span style="color: #000000;">(</span><span style="color: #a31515;">"limit"</span><span style="color: #000000;">, </span><span style="color: #001080;">type</span><span style="color: #000000;">=</span><span style="color: #267f99;">int</span><span style="color: #000000;">, </span><span style="color: #001080;">default</span><span style="color: #000000;">=</span><span style="color: #795e26;">len</span><span style="color: #000000;">(</span><span style="color: #0070c1;">SOUPS</span><span style="color: #000000;">))</span></div><div><span style="color: #000000;">&nbsp; &nbsp; </span><span style="color: #af00db;">return</span><span style="color: #000000;"> </span><span style="color: #795e26;">Layout</span><span style="color: #000000;">(</span><span style="color: #795e26;">SoupsCollection</span><span style="color: #000000;">(</span><span style="color: #0070c1;">SOUPS</span><span style="color: #000000;">, </span><span style="color: #001080;">limit</span><span style="color: #000000;">=</span><span style="color: #001080;">limit</span><span style="color: #000000;">), </span><span style="color: #001080;">title</span><span style="color: #000000;">=</span><span style="color: #a31515;">"Soups list"</span><span style="color: #000000;">)</span></div><br><br><div><span style="color: #795e26;">@</span><span style="color: #001080;">app</span><span style="color: #795e26;">.</span><span style="color: #795e26;">route</span><span style="color: #000000;">(</span><span style="color: #a31515;">"/&lt;int:id&gt;"</span><span style="color: #000000;">)</span></div><div><span style="color: #0000ff;">def</span><span style="color: #000000;"> </span><span style="color: #795e26;">soup</span><span style="color: #000000;">(</span><span style="color: #001080;">id</span><span style="color: #000000;">: </span><span style="color: #267f99;">int</span><span style="color: #000000;">):</span></div><div><span style="color: #000000;">&nbsp; &nbsp; </span><span style="color: #001080;">found</span><span style="color: #000000;"> = </span><span style="color: #0070c1;">SOUPS</span><span style="color: #000000;">.</span><span style="color: #795e26;">get</span><span style="color: #000000;">(</span><span style="color: #001080;">id</span><span style="color: #000000;">)</span></div><div><span style="color: #000000;">&nbsp; &nbsp; </span><span style="color: #af00db;">if</span><span style="color: #000000;"> </span><span style="color: #0000ff;">not</span><span style="color: #000000;"> </span><span style="color: #001080;">found</span><span style="color: #000000;">:</span></div><div><span style="color: #000000;">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #af00db;">return</span><span style="color: #000000;"> </span><span style="color: #795e26;">Layout</span><span style="color: #000000;">(</span><span style="color: #267f99;">ht</span><span style="color: #000000;">.</span><span style="color: #001080;">t</span><span style="color: #000000;">(</span><span style="color: #a31515;">"Unknown soup id"</span><span style="color: #000000;">), </span><span style="color: #001080;">title</span><span style="color: #000000;">=</span><span style="color: #a31515;">"Soup 404"</span><span style="color: #000000;">)</span></div><div><span style="color: #000000;">&nbsp; &nbsp; </span><span style="color: #af00db;">return</span><span style="color: #000000;"> </span><span style="color: #795e26;">Layout</span><span style="color: #000000;">(</span><span style="color: #795e26;">SoupCard</span><span style="color: #000000;">(</span><span style="color: #001080;">id</span><span style="color: #000000;">, </span><span style="color: #001080;">found</span><span style="color: #000000;">), </span><span style="color: #001080;">title</span><span style="color: #000000;">=</span><span style="color: #001080;">found</span><span style="color: #000000;">.</span><span style="color: #001080;">name</span><span style="color: #000000;">)</span></div></div>

You can run the [tag-soup](https://en.wikipedia.org/wiki/Tag_soup)-inspired example with `flask --app=soup.py run`

Few things to note:

- It's just the normal Python code without any magic
- Syntax highlighting makes the HTML look like, well, HTML
- UI is composed from components
- Components functions names are not [PEP-8](https://peps.python.org/pep-0008/). It's intentional to make it look more JSX-y.

The main utilities are:

- `ht.m` - wraps the markup and triggers syntax highlighing, linting and formatting.
- `ht.t` - composes text and components, HTML-escapes and concatenates them
- `ht.c` - composes classes in a way resembling the popular [classnames](https://www.npmjs.com/package/classnames) library.
- `Safe` - noop subclass of `str`. Used in runtime to tell HTML-escaped from non-escaped strings. Also used in linting to prove the f-expressions are safe.

<!--
## What's next ?

- Read the [motivation](rant.md) if you think the template languages are the best all-around solution
- Learn the (minimal) [utilities API](api.md)
- Setup VS Code [syntax highlighing](highlight.md)
- Add the [linting](lint.md) to write HTML with the confidence
- Use the [formatter](format.md) to format the HTML and make the git diffs less noisy -->
